<html>
    <head>
        <title>Greens Savings and Blown</title>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.0.min.js"></script>
       <script type="text/javascript" src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
       <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/black-tie/jquery-ui.css"/>
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
        <style>
            .heading  [class^="col-"] {
                background-color:black;
                color:white;
                border-left:white 1px solid;}
                
            
                .link{
                    cursor:pointer;
                }
                
            span.futureItem
            {
                font-style:italic;
                color: grey;
            }
            
            
            .balanceLabel{
                width:30%;
                float:left;
            }
                
            
        </style>
    </head>
    
    <body>
    <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Green Savings and Blown</a>
      </div>
      <p class="navbar-text">Signed in as <span data-bind="text:username"></span><a href="#" onclick="model.Logout();return false;">(Signout)</a></p>
       <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
       <ul class="nav navbar-nav">
         <li class="active dropdown">
           <a href="#" class="dropdown-toggle" data-toggle="dropdown">Banks <span data-bind="visible: bankName, with:bankName">(<span data-bind="text: $data.bankName"></span>)</span><span class="caret"></span></a>
           <ul class="dropdown-menu" role="menu" data-bind="foreach: bankNames">
             <li><a href="#" data-bind="text: $data.bankName, click: $parent.SetBankName"></a></li>
           </ul>
         </li>
          <li><a href="Transaction.html">Add Transaction</a></li>
       </ul>
       
       
       </div>
    
    </div>
    </nav>
     
            
    <div class="container " id="bankSheet" style="display:none" data-bind="visible: loaded()">
      <ul class="alert alert-danger" data-bind="visible: errors().length > 0, foreach:errors">
          <li data-bind="text:message"></li>
           
      </ul>
      
       <ul class="alert alert-warning" data-bind="visible: warnings().length > 0, foreach:warnings">
          <li data-bind="text:$data"></li>
           
      </ul>
        <ul class="alert alert-success" data-bind="visible: messages().length > 0, foreach:messages">
          <li data-bind="text:$data"></li>
           
      </ul>
        <h2 data-bind="text: title" >Test Title</h2>
        <button type="button" class="btn btn-default" data-bind="click:ShowSummary">Summary</button>&nbsp;
        <button type="button" class="btn btn-default" data-bind="click:ShowFilter">Filter</button>&nbsp;
        <button type="button" class="btn btn-default" data-bind="click:ShowDifference">Difference</button>&nbsp;
        <span data-bind="with: bankplan"> 
            <button type="button" class="btn btn-default"  data-bind="disable: $data.TransactionCount == 0, click:$parent.ShowFutureTransactions" >Future Transactions</button></span>
        <br/><br/>
          <div class="panel panel-info" style="width:100%;">
                        <div class="panel-heading"><span class="panel-title">Balances</span></div>
                        <div class="panel-body" >
                            <div data-bind="with: total">
                            
                               <div class="balanceLabel"><b>Actual Balance:</b> <span data-bind="text: formatMoney($data.ActualBalance)"></span></div>
                               <div class="balanceLabel">Current Balance: <span data-bind="text: formatMoney($data.ClearedBalance)"></span></div>
                                <div class="balanceLabel" data-bind="visible: $data.FutureBalance">Future Balance: <span data-bind="text: formatMoney($data.FutureBalance)"></span></div>
                            
                            </div>
                           
                        </div>
                    </div>
                 <table class="table table-condensed table-striped">
        <thead>
            <tr>
                <th class="col-md-1">Date</th>
                <th class="col-md-3">Payee</th>
                <th class="col-md-1">Deposit</th>
                <th class="col-md-1">Withdrawl</th>
                <th class="col-md-1">Balance</th>
                <th class="col-md-1">Current Balance</th>
                <th class="col-md-2">Actions</th> 
            </tr>
        </thead>
        <tr class="info">
            <td class="col-md-1"><input data-bind="value: transactionDate" class="transactionDate" style="width:80px"/></td>
            <td class="col-md-3"><input data-bind="value: transactionPayee" style="width:250px"/></td>
            <td class="col-md-1"><input data-bind="value: transactionDeposit" style="width:80px"/></td>
            <td class="col-md-1"><input data-bind="value: transactionWidthdrawl" style="width:80px"/></td>
            <td class="col-md-1"><span data-bind="text: transactionTotal"></span></td>
            <td class="col-md-1">&nbsp;</td>
            <td class="col-md-1"><input type='button' data-bind="click: AddTransaction" class="link" value="Add"/></td>
        </tr>
        <tbody data-bind="foreach: filteredTransactions">
            <tr class="no-bottom-line" data-bind="attr:{id: id}" >
                <td class="col-md-1" ><input data-bind="value: date" style="width:80px" class="transactionDate"></input></td>
                <td class="col-md-3"><input data-bind="value: payee" style="width:250px"></input></td>
                <td class="col-md-1"  ><!-- ko if: type=='deposit' --><input data-bind="value: amount" style="width:80px"></input><!-- /ko -->&nbsp;</td>
                <td class="col-md-1"  ><!-- ko if: type=='widthdrawl' --><input data-bind="value: amount" style="width:80px"></input><!-- /ko -->&nbsp;</td>
                <td class="col-md-2" ><!-- ko if: IsFutureItem --> <span class="futureItem" data-bind="text: model.Money(balance.FutureBalance )"></span><!-- /ko -->
                    <!-- ko if: IsFutureItem == false --> <span data-bind="text: model.Money(balance.ActualBalance )"></span><!-- /ko -->
                </td>
                <td class="col-md-2"  data-bind="text: model.Money(balance.ClearedBalance )"></td>
                <td class="col-md-2"><a data-bind="click: $parent.UpdateTransaction" class="link" >Update</a> | <a class="link" data-bind="click: $parent.DeleteTransaction">Delete</a> | <a class="link" data-bind="click: $parent.ShowDetails">Details</a>
                <div class="modal fade bs-example-modal-sm" id="transactionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel summaryLabel">Details</h4>
                      </div>
                      <div class="modal-body"><div>
                          Category:<select data-bind="options:$parent.cats, optionsText:'name', optionsValue:'name', value:category"></select>
           
                      </div><div>Status:<select data-bind="options:$parent.StatusOptions, value:Status"><select data-bind="options:$parent.StatusOptions, value:Status"></div>
                      </div>
                      <div class="modal-footer">
                           <button type="button" class="btn btn-default" data-bind="click: $parent.UpdateTransactionInModal" >Update</button>
                      </div>
                    </div>
                </div>
            </div>
                    
                </td>
                
            </tr>
           
           
            
        </tbody>
    </table>
       
    
       </div>
       
       <div class="modal fade bs-example-modal-lg"  id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Future Transactions</h4>
      </div>
      <div class="modal-body">
       Show next <select id="PlanDaysSelect" data-bind="options:PlanDayOptions, value:PlanDays"></select> Days
       <div data-bind="with:bankplan" id="futureTransactions">
     
              <table class="table table-condensed">
        <thead>
            <tr>
                <th class="col-md-1">Date</th>
                <th class="col-md-3">Payee</th>
                <th class="col-md-1">Deposit</th>
                <th class="col-md-1">Withdrawl</th>
                <th class="col-md-1">Balance</th>
                <th class="col-md-1">Current Balance</th>
                <th class="col-md-2">Actions</th> 
            </tr>
        </thead>
       
        <tbody data-bind="foreach: $data.transactions" >
        
            <tr class="no-bottom-line" >
                <td class="col-md-1" ><input data-bind="value: date" style="width:80px" class="transactionDate"></input></td>
                <td class="col-md-3"><input data-bind="value: payee" style="width:250px"></input></td>
                <td class="col-md-1"  ><!-- ko if: type=='deposit' --><input data-bind="value: amount" style="width:80px"></input><!-- /ko -->&nbsp;</td>
                <td class="col-md-1"  ><!-- ko if: type=='widthdrawl' --><input data-bind="value: amount" style="width:80px"></input><!-- /ko -->&nbsp;</td>
                <td class="col-md-2" >
                    <span data-bind="text: model.Money(balance.ActualBalance )"></span>
                </td>
                <td class="col-md-2"  data-bind="text: model.Money(balance.ClearedBalance )"></td>
                <td class="col-md-2"> <div data-bind="click: model.AddFutureTransaction" class="link" >Add</div> </td>
            </tr>
            <tr class="subRow" style="display:none"><td></td><td>Category:<select data-bind="options:$parent.cats, optionsText:'name', optionsValue:'name', value:category"></select></td>
            <td><select data-bind="options:$parent.StatusOptions, value:Status"><select data-bind="options:$parent.StatusOptions, value:Status"></td></tr>
        </tbody>
    </table>
       </div>
        </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div>
</div>

<div class="modal fade bs-example-modal-lg"  id="SummaryModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel summaryLabel">Summary</h4>
      </div>
      <div class="modal-body">
       
 <div data-bind="with: summary">
        <table width="100%"><tr><td valign="top"><div> Date: <input type="text" data-bind="value: $parent.summaryDate"></input></div>
                            <div> Deposit: <span data-bind="text: formatMoney($data.TotalDeposits)"></span>(<span data-bind="text:$data.TotalDepositsCount"></span>)</div>
                            <div> Withdrawls: <span data-bind="text: formatMoney($data.TotalWithdrawls)"></span>(<span data-bind="text:$data.TotalWithdrawlsCount"></span>)</div>
                            <div> Gains: <span data-bind="text: formatMoney($data.TotalGains)"></span>(<span data-bind="text:$data.TotalTransactions"></span>)</div>
                           
       </td><td valign="top">
                                <div data-bind="foreach: $data.ByCategory">
                                  <div> <span data-bind="text: $data.category"></span>: <span data-bind="text: formatMoney($data.total)"></span>(<span data-bind="text:$data.count"></span>)</div>
                              
                                
                            </div></td></tr></table></div>
        </div>
   
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div>
     </div>

<div class="modal fade bs-example-modal-sm"  id="filterModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel summaryLabel">Filter</h4>
      </div>
      <div class="modal-body">
       
<div>Show (<span data-bind="text: numberOfFutureItems()"></span>) Future Items:  <input type="checkbox" data-bind="checked: showFutureItems" /> </div>
                            <div>Show Status: <select id="someId" data-bind="options:StatusOptions,optionsCaption: '<No Filter>', value:statusFilter"></select></div>
                            <div>Show Category: <select id="someId2" data-bind="options:cats, optionsText:'name', optionsValue:'name',optionsCaption: '<No Filter>', value:categoryFilter"></select></div>
        
        
        </div>    
        
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div>                
     </div>  
     
     <div class="modal fade bs-example-modal-sm"  id="OnlineDifferenceCalculator" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel summaryLabel">Filter</h4>
      </div>
      <div class="modal-body">
      <table>
          <tr data-bind="with: total">
             <td>Current Balance:</td><td data-bind="text: $data.ClearedBalance"></td>
         </tr>
        <tr>
            <td>Online Balance:</td><td><input data-bind="value: WebBalance" style="width:80px"></input></td>
        </tr>
        <tr>
            <td>Differencee:</td><td data-bind="text: Difference"></td>
        </tr>
        </table>
        </div>    
        
        
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
    </div>
  </div>                
     </div>  
       <script type="text/javascript">needBankData=true</script>
         <script src="js/knockout-3.1.0.js" type="text/javascript"></script>
        <script src="js/bank.js" type="text/javascript"></script>
       <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    </body>
    
</html>